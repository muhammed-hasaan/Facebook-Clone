<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body style="background-color: black;">
    <div class="back" style="padding: 20px; background-color: rgb(47, 47, 47); width: 100%; display: flex; padding-left: 10px; color: aliceblue;column-gap: 20px;">
        <img style="width: 150px; height: 150px; border-radius: 100px;" src="" alt="" id="img">
       <div style="display: flex;align-items: center;flex-direction: column;">

           <h1 style="margin-top: 30px;" id="name1"></h1>
           <h3 style="margin-top: 10px;">15K friends</h3>
        </div>
        <hr style=" display: flex; justify-content: center; align-items: center; flex-direction: column;  color: rgb(255, 0, 0); background-color: antiquewhite; height: 150px;" />
    </div>
    <hr style="  color:white; background-color: white; " />
    <div class="posts" style="display: flex; padding-left: 10px; align-items: center; width: 100%;background-color :rgb(47, 47, 47); color: white;">
        <ul style="cursor: pointer; padding: 10px; display: flex; justify-content: center; align-items: center; column-gap: 20px; list-style: none; font-size: 25px;">
            <li style="padding: 10px; background-color: black; color: white; border-radius: 50px;">Posts</li>
            <li id="home">Home</li>
            <li>About</li>
            <li>Friend</li>
            <li>Photos</li>
            <li>Vides</li>
        </ul>
    </div>
    <div style="display: flex; justify-content: center; align-items: center; padding: 20px;">
        <h1 style="color: white; ">My Posts</h1>
    </div>
    <div id="postdiv" style="display: flex; justify-content: center; align-items: center; flex-direction: column; width: 100%;">
    </div>
    <script type="module">
        import { db, app, auth, storage } from "./firebase.mjs"
import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-auth.js";
import { collection, query, onSnapshot, doc, where, addDoc } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";
import { ref, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-storage.js";


onAuthStateChanged(auth, (user) => {
    if (user) {
        const uid = user.email;
var num = JSON.parse(localStorage.getItem("num"))
document.getElementById("name1").innerText = num
getDownloadURL(ref(storage, user.email))
            .then(async (url) => {
             document.getElementById('img');
                img.setAttribute('src', url);
            })



        const q2 = query(collection(db, "post"));
        onSnapshot(q2, (querySnapshot) => {
            querySnapshot.forEach((doc) => {
                var uidname = JSON.parse(localStorage.getItem("uidname"))
                if(doc.data().usernameforpost === uidname){

                    document.getElementById("postdiv").innerHTML +=
                    `
                    <div class="main-body-friend-post loadComments" style="width:70%;">
                    <div class="friend-post-container" >
                        <div class="friend-post-top">
                            <div class="left">
                                <img src="${doc.data().url}" alt="friend">
                                <div class="title">
                                    <p class="mm">${doc.data().usernameforpost}</p>
                                    <p class="ss">${doc.data().strTime}</p>
                                </div>
                            </div>
                            <div class="right">
                                <i class="fas fa-ellipsis-h"></i>
                            </div>
                        </div>
                        <div class="friend-post-title">
                            ${doc.data().postinp}
                        </div>
                        <div class="friend-post-info">
                            <div class="info-left">
                                <div class="emj">
                                    <div class="el-12">
                                        <i class="yellow fas fa-grin"></i>
                                        <div class="el-12-info">
                                            <ul>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="el-12">
                                        <i class="red fas fa-heart"></i>
                                        <div class="el-12-info">
                                            <ul>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                                <li>Sarah</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="title">Sarah and 1252 others</div>
                            </div>
                            <div class="info-right">
                                <p>561</p><span>comments</span>
                                <p>1002</p><span>Share</span>
                            </div>
                        </div>
                        <div class="friend-post-actions">
                            <div class="postUT"></div>
                                <div class="actions-cp-12">
                                    <div class="action-col like">
                                        <div class="like-p">
                                            <i class="likeIcon fas fa-thumbs-up"></i>
                                        </div>
                                        <p>Like</p>

                                        <div class="get-emj-12">
                                            <div class="col1"><i class="blue fas fa-thumbs-up"></i></div>
                                            <div class="col1"><i class="yellow fas fa-laugh-beam"></i></div>
                                            <div class="col1"><i class="red fas fa-heart" value="heart"></i></div>
                                            <div class="col1"><i class="yellow fas fa-surprise"></i></div>
                                            <div class="col1"><i class="red fas fa-kiss-wink-heart"></i></div>
                                        </div>
                                    </div>
                                    <div class="action-col comments">
                                        <i class="fas fa-comment"></i>
                                        <p>Comment</p>
                                    </div>
                                    <div class="action-col">
                                        <i class="fas fa-share"></i>
                                        <p>Share</p>
                                    </div>
                                </div>
                            <div class="postUT"></div>
                        </div>
                        <div class="friend-post-comment-section">
                            <div class="friend-post-author-comment">
                                <img src="src/img/profile.jpg" alt="profile">
                                <input type="text" name="" id="" placeholder="Write a comment...">
                            </div>
                            <div class="friend-post-comments">
                                <div class="post-comments">
                                    <div class="post-comment-image">
                                        <img src="src/img/friends3.jpg"  alt="friend">
                                    </div>
                                    <div class="post-comment-cm">
                                       <div class="cm-top">
                                            <div class="cm-title">Denise Rodgers</div>
                                            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Veritatis ipsa velit aperiam earum molestiae sit aut libero dolores, facere voluptas impedit sint repellat animi maxime.</p>
                                       </div>
                                       <div class="cm-bottom">
                                           <div class="cm-like">Like</div>
                                           <div class="cm-reply replyCom">Reply</div>
                                           <div class="cm-time">25m</div>
                                       </div>
                                    </div>
                                </div>
                            </div>
                            <div class="friend-post-comments">
                                <div class="post-comments">
                                    <div class="post-comment-image">
                                        <img src="src/img/friends3.jpg"  alt="friend">
                                    </div>
                                    <div class="post-comment-cm">
                                       <div class="cm-top">
                                            <div class="cm-title">Denise Rodgers</div>
                                            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Veritatis ipsa velit aperiam earum molestiae sit aut libero dolores, facere voluptas impedit sint repellat animi maxime.</p>
                                       </div>
                                       <div class="cm-bottom">
                                           <div class="cm-like">Like</div>
                                           <div class="cm-reply replyCom">Reply</div>
                                           <div class="cm-time">25m</div>
                                       </div>
                                    </div>
                                </div>
                            </div>
                            <div class="friend-post-comments">
                                <div class="post-comments">
                                    <div class="post-comment-image">
                                        <img src="src/img/friends2.jpg"  alt="friend">
                                    </div>
                                    <div class="post-comment-cm">
                                       <div class="cm-top">
                                            <div class="cm-title">Tom Miller</div>
                                            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit.</p>
                                       </div>
                                       <div class="cm-bottom">
                                           <div class="cm-like">Like</div>
                                           <div class="cm-reply replyCom">Reply</div>
                                           <div class="cm-time">25m</div>
                                       </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                    `
                }
                })
            })
        }
            })
            document.getElementById("home").addEventListener("click" , ()=>{
                window.location.href="./index.html"
            })
    </script>
</body>
</html>